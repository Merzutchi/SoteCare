@model SoteCare.ViewModels.PHViewModel

<h2>Patient History for @Model.PatientName</h2>

<!-- Diagnoses Section -->
<div class="card mb-4">
    <div class="card-header">
        <h3>Diagnoses</h3>
    </div>
    <div class="card-body">
        @foreach (var diagnosis in Model.Diagnoses)
        {
            <div class="list-group">
                <div class="list-group-item">
                    <h4>@diagnosis.DiagnosisName</h4>
                    <p><strong>Diagnosis Date:</strong> @(diagnosis.DiagnosisDate.HasValue ? diagnosis.DiagnosisDate.Value.ToString("dd-MM-yyyy") : "Date not available")</p>
                    <p><strong>Notes:</strong> @diagnosis.Notes</p>
                </div>
            </div>
        }
    </div>
</div>

<!-- Treatments Section -->
<div class="card mb-4">
    <div class="card-header">
        <h3>Treatments</h3>
    </div>
    <div class="card-body">
        @foreach (var treatment in Model.Treatments)
        {
            <div class="list-group">
                <div class="list-group-item">
                    <h4>@treatment.TreatmentType</h4>
                    <p><strong>Details:</strong> @treatment.TreatmentDetails</p>
                    <p><strong>Start Date:</strong> @treatment.StartDate.ToString("dd-MM-yyyy")</p>
                    <p><strong>End Date:</strong> @(treatment.EndDate.HasValue ? treatment.EndDate.Value.ToString("dd-MM-yyyy") : "Ongoing")</p>
                </div>
            </div>
        }
    </div>
</div>

<!-- Medications Section -->
<div class="card mb-4">
    <div class="card-header">
        <h3>Medications</h3>
    </div>
    <div class="card-body">
        @foreach (var medication in Model.Medications)
        {
            <div class="list-group">
                <div class="list-group-item">
                    <h4>@medication.MedicationName</h4>
                    <p><strong>Start Date:</strong> @medication.StartDate.ToString("dd-MM-yyyy")</p>
                </div>
            </div>
        }
    </div>
</div>

<!-- Back Button -->
<a class="btn btn-secondary" href="@Url.Action("Details", "Patients", new { id = ViewBag.PatientID })">Back to Patient Details</a>