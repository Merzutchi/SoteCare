@model SoteCare.ViewModels.PHViewModel

<h2>Potilaan historia, @Model.PatientName</h2>

<!-- Diagnoses Section -->
<div class="card mb-4">
    <div class="card-header">
        <h3>Diagnoosi</h3>
    </div>
    <div class="card-body">
        @foreach (var diagnosis in Model.Diagnoses)
        {
            <div class="list-group">
                <div class="list-group-item">
                    <h4>@diagnosis.DiagnosisName</h4>
                    <p><strong>Päivämäärä:</strong> @(diagnosis.DiagnosisDate.HasValue ? diagnosis.DiagnosisDate.Value.ToString("dd-MM-yyyy") : "Date not available")</p>
                    <p><strong>Muistiinpanot:</strong> @diagnosis.Notes</p>
                </div>
            </div>
        }
    </div>
</div>

<!-- Treatments Section -->
<div class="card mb-4">
    <div class="card-header">
        <h3>Hoito</h3>
    </div>
    <div class="card-body">
        @foreach (var treatment in Model.Treatments)
        {
            <div class="list-group">
                <div class="list-group-item">
                    <h4>@treatment.TreatmentType</h4>
                    <p><strong>Tarkennus:</strong> @treatment.TreatmentDetails</p>
                    <p><strong>Aloitus päivämäärä:</strong> @treatment.StartDate.ToString("dd-MM-yyyy")</p>
                    <p><strong>Lopetus päivämäärä:</strong> @(treatment.EndDate.HasValue ? treatment.EndDate.Value.ToString("dd-MM-yyyy") : "Ongoing")</p>
                </div>
            </div>
        }
    </div>
</div>

<!-- Medications Section -->
<div class="card mb-4">
    <div class="card-header">
        <h3>Lääkitys</h3>
    </div>
    <div class="card-body">
        @foreach (var medication in Model.Medications)
        {
            <div class="list-group">
                <div class="list-group-item">
                    <h4>@medication.MedicationName</h4>
                    <p><strong>Aloitus päivämäärä:</strong> @medication.StartDate.ToString("dd-MM-yyyy")</p>
                </div>
            </div>
        }
    </div>
</div>
<div class="mt-3">
    @Html.ActionLink("Takaisin", "Details", "Patients", new { id = ViewBag.PatientID }, new { @class = "btn btn-secondary" })
</div>